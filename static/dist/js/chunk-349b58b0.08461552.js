(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-349b58b0"],{"0bc6":function(t,e,s){},1242:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-container",[s("h1",[t._v(" Заявки ")]),0!=t.orders.length?s("v-list",{attrs:{"two-line":"",color:"white"}},[s("v-subheader",{staticClass:"mr-8",attrs:{inset:""}},[s("span",[t._v(" Покупка ")])]),t._l(t.purchaseOrders,(function(e){return s("v-list-item",{key:e.id},[s("v-list-item-avatar",{attrs:{color:"grey lighten-3 text-center caption"}},[e.icon?s("v-img",{attrs:{src:e.icon}}):s("span",{staticClass:"text-center mx-auto"},[t._v(" "+t._s(e.stock.name)+" ")])],1),t.profile.is_superuser?s("div",{staticClass:"mr-5"},[s("v-list-item-subtitle",[t._v(" Владелец ")]),s("v-list-item-title",{staticClass:"d-inline"},[t._v(" "+t._s(e.user)+" ")])],1):t._e(),s("v-list-item-content",[e.type?s("v-list-item-title",[t._v(" Статус заявки на продажу "+t._s(e.stock.name)+" ")]):s("v-list-item-title",[t._v(" Статус заявки на покупку "+t._s(e.stock.name)+" ")]),e.is_closed?s("v-list-item-subtitle",{staticClass:"green--text"},[t._v(" Выполнена ")]):s("v-list-item-subtitle",{staticClass:"grey--text"},[t._v(" Открыта ")])],1),s("v-list-item-action",[s("v-list-item-title",{staticClass:"font-weight-medium"},[t._v(" "+t._s(e.count)+" X "+t._s(e.price.toFixed(2))+"₮ ")]),s("v-list-item-subtitle",[t._v(" "+t._s((e.count*e.price).toFixed(2))+"₮ ")])],1)],1)})),t.purchaseOrders.length?t._e():s("h5",{staticClass:"ml-15"},[t._v(" У вас пока нет заявок на продажу ")]),s("v-divider"),s("v-subheader",{staticClass:"mr-8",attrs:{inset:""}},[s("span",[t._v(" Продажа ")])]),t._l(t.saleOrders,(function(e){return s("v-list-item",{key:e.id},[s("v-list-item-avatar",{attrs:{color:"grey lighten-3 text-center caption"}},[e.icon?s("v-img",{attrs:{src:e.icon}}):s("span",{staticClass:"text-center mx-auto"},[t._v(" "+t._s(e.stock.name)+" ")])],1),t.profile.is_superuser?s("div",{staticClass:"mr-5"},[s("v-list-item-subtitle",[t._v(" Владелец ")]),s("v-list-item-title",{staticClass:"d-inline"},[t._v(" "+t._s(e.user)+" ")])],1):t._e(),s("v-list-item-content",[e.type?s("v-list-item-title",[t._v(" Статус заявки на продажу "+t._s(e.stock.name)+" ")]):s("v-list-item-title",[t._v(" Статус заявки на покупку "+t._s(e.stock.name)+" ")]),e.is_closed?s("v-list-item-subtitle",{staticClass:"green--text"},[t._v(" Выполнена ")]):s("v-list-item-subtitle",{staticClass:"grey--text"},[t._v(" Открыта ")])],1),s("v-list-item-action",[s("v-list-item-title",{staticClass:"font-weight-medium"},[t._v(" "+t._s(e.count)+" X "+t._s(e.price.toFixed(2))+"₮ ")]),s("v-list-item-subtitle",[t._v(" "+t._s((e.count*e.price).toFixed(2))+"₮ ")])],1)],1)})),t.saleOrders.length?t._e():s("h5",{staticClass:"ml-15"},[t._v(" У вас пока нет заявок на продажу ")])],2):s("h3",{staticClass:"ml-15"},[t._v(" У вас пока нет заявок ")])],1)},r=[],n=s("b85c"),a=(s("4de4"),s("cb98")),l={name:"Orders",data:function(){return{orders:[],ordersInterval:void 0}},methods:{getOrders:function(){var t=this;a["a"].get("api/v1/orders/",{headers:{Authorization:"Bearer ".concat(this.$store.getters.accessToken)}}).then((function(e){if(t.orders=e.data,t.profile.is_superuser){var s,i=Object(n["a"])(t.orders);try{for(i.s();!(s=i.n()).done;){var r=s.value;t.usernames.has(r.user)||(console.log("load"),t.$store.dispatch("loadUsername",{id:r.user})),console.log(t.usernames.get(r.user)),r.user=t.usernames.get(r.user)}}catch(a){i.e(a)}finally{i.f()}}console.log(t.orders)})).catch((function(e){console.log(e),clearInterval(t.ordersInterval)}))},orderClosed:function(t){return!!t.is_closed}},computed:{purchaseOrders:function(){return this.orders.filter((function(t){return 0==t.type}))},saleOrders:function(){return this.orders.filter((function(t){return 1==t.type}))},usernames:function(){return console.log(this.$store.getters.usernames),this.$store.getters.usernames},profile:function(){return this.$store.getters.profile}},mounted:function(){this.getOrders(),this.ordersInterval=setInterval(function(){this.getOrders()}.bind(this),1e3)},destroyed:function(){clearInterval(this.ordersInterval)}},o=l,c=s("2877"),u=s("6544"),v=s.n(u),d=s("a523"),m=s("ce7e"),_=s("adda"),h=s("8860"),f=s("da13"),p=s("1800"),g=s("8270"),b=s("5d23"),C=s("e0c7"),x=Object(c["a"])(o,i,r,!1,null,null,null);e["default"]=x.exports;v()(x,{VContainer:d["a"],VDivider:m["a"],VImg:_["a"],VList:h["a"],VListItem:f["a"],VListItemAction:p["a"],VListItemAvatar:g["a"],VListItemContent:b["a"],VListItemSubtitle:b["b"],VListItemTitle:b["c"],VSubheader:C["a"]})},e0c7:function(t,e,s){"use strict";var i=s("5530"),r=(s("0bc6"),s("7560")),n=s("58df");e["a"]=Object(n["a"])(r["a"]).extend({name:"v-subheader",props:{inset:Boolean},render:function(t){return t("div",{staticClass:"v-subheader",class:Object(i["a"])({"v-subheader--inset":this.inset},this.themeClasses),attrs:this.$attrs,on:this.$listeners},this.$slots.default)}})}}]);
//# sourceMappingURL=chunk-349b58b0.08461552.js.map